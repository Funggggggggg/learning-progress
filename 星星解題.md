# 星星解題

作為一位平時不以邏輯標籤著稱的人類，做基礎語法練習時，更需要仔細搞清楚每個步驟，將邏輯能力訓練起來。  
光是最簡單的巢狀迴圈（重複迴圈），就想了很久。

---

## for 迴圈語法

解析：

```js
for (let i = 0; i < 10; i++) {
    document.write(i);
}
```

`for` 迴圈的括號 `()` 裡有 **三個部分**，用分號 `;` 分開，語法結構如下：

```js
for (初始值; 條件判斷; 每次循環後要做的事) {
    // 迴圈每次執行的程式碼
}
```

| 區塊               | 這段的意思                                                         | 範例                                   |
|--------------------|--------------------------------------------------------------------|----------------------------------------|
| **1. 初始值**      | 宣告了一個變數 i（索引 index），也是初始值。                       | `let i = 0` → 宣告變數 `i`，起始值為 0。 |
| **2. 條件判斷**    | 迴圈執行的條件，為 true，才會繼續執行。                            | `i < 10` → 當 `i` 小於 10 時繼續跑；反之停止。 |
| **3. 每次循環後動作** | 每次 `{}` 裡的程式執行完，就會執行這段程式碼來更新索引值           | `i++` → 每次執行完後，`i` 加 1。        |

---

## 題目

印星星塔，結構如下圖  
使用者能用 `prompt()` 輸入星星塔層數

```
☆☆☆☆★☆☆☆☆
☆☆☆★★★☆☆☆
☆☆★★★★★☆☆
☆★★★★★★★☆
★★★★★★★★★
```

---

## 寫法

### 1. 打印星星行數

將星星用 for 迴圈打印出來，加 `<br>` 換行，這樣可以打印出使用者輸入數字的行數。

```js
const input = prompt("輸入一個數字");
for(let i = 1; i <= input; i++ ) {
    document.write('★<br>');
}
```

```
★
★
★
★
★
```

### 2. 巢狀迴圈

為了方便理解，將 input 改成 5。

```js
const input = 5;
for (let i = 1; i <= input; i++) {
    for (let j = i; j <= input; j++) {
        document.write('★');
    }
    document.write('<br>');
}
```

出來的結果是

```
★★★★★
★★★★
★★★
★★
★
```

在這邊就先碰到第一個困難點，為什麼內層的 j 在 i = 1 時居然是 5？  
此時當然是要先釐清邏輯。

---

### 2.2 `i`、`j` 的走法圖解

| `i` 值 | `j` 起點 | `j` 值         | 輸出（當行） |
|--------|----------|----------------|--------------|
| 1      | 1        | 1 2 3 4 5      | ★★★★★        |
| 2      | 2        | 2 3 4 5        | ★★★★         |
| 3      | 3        | 3 4 5          | ★★★          |
| 4      | 4        | 4 5            | ★★           |
| 5      | 5        | 5              | ★            |

視覺化圖示

```
第1層：★★★★★   ← i = 1，j 從 1 到 5
第2層：★★★★    ← i = 2，j 從 2 到 5
第3層：★★★     ← i = 3，j 從 3 到 5
第4層：★★      ← i = 4，j 從 4 到 5
第5層：★       ← i = 5，j 從 5 到 5
```

相信有慧根的朋友看到這邊應該已經完全理解了。  
但愚鈍如我依然不明白，後來跟 AI 討論之後才解惑。

---

### 2.3 困難點：內層迴圈做了什麼事？

**為什麼當 `i = 1` 時，`j` 會跑出 1~5？**  
這中間發生了什麼事？

---

```js
const input = 5;
for (let i = 1; i <= input; i++) {
    for (let j = i; j <= input; j++) {
        document.write('★');
    }
    document.write('<br>');
}
```

#### 第一次 i = 1 時，j 的流程拆解：

1. `i = 1`（外層迴圈的第一輪開始）
2. 進入內層 `for` 迴圈 → `j = i` → 所以 `j = 1`
3. 檢查：`j <= input` → `1 <= 5` ✅ → 印出 `★`
4. 然後 `j++` → `j = 2`
5. 檢查：`2 <= 5` ✅ → 印出 `★`
6. `j++` → `j = 3` → `3 <= 5` ✅ → 印 `★`
7. `j++` → `j = 4` → `4 <= 5` ✅ → 印 `★`
8. `j++` → `j = 5` → `5 <= 5` ✅ → 印 `★`
9. `j++` → `j = 6` → `6 <= 5` ❌ → 內層 `for` 結束
10. `document.write('<br>')` → 換行，外層進入 `i = 2`

---

所以說，當 i = 1 時，外層的 for 迴圈先經過條件判斷，符合資格後進入到內層。  
而內層 for 迴圈執行了 5 次，因此第一層的星星才有 5 個。

當 i = 5 時，外層符合資格後進入，j = i 也就是 5，5 <= 5 一樣符合資格，所以印一顆星星。  
但 j++ 也就是 5+1=6 已經沒有下一次了，迴圈就跳出結束。

---

### 3. 印出相反星星

行不變，所以將 for 迴圈放在內層。

```js
const input = 5;
for(let i = 1; i <= input; i++ ) {
    for(let j = i; j <= input ; j++ ) {
        document.write('☆');
    }
    for(let k = i; k >= 1 ; k-- ) {
        document.write('★');
    }
    document.write('<br>');
}
```

出來的結果是

```
☆☆☆☆☆★
☆☆☆☆★★
☆☆☆★★★
☆☆★★★★
☆★★★★★
```

---

### 3.1 困難點：k = i or k = input？

解到這個步驟時，還是無法一次到位，在 `k = i` 還是 `k = input` 等等的條件設定上試了好一陣子。

#### 這段 `k = i` 的意思是：

- 第 1 層：從 `i = 1` 到 `input`，每次都代表一「行」
- 第 2 層：`j` 從 `i` 到 `input`，印出越來越少的 ☆（因為 `i` 變大）
- 第 3 層：`k` 從 `i` 倒數到 `1`，印出越來越多的 ★（因為 `i` 越大，★ 越多）

---

#### 如果改成 `k = input`：

此時 `k` 每次都從 `input` 倒數到 `1`，所以：  
每一行都會印出**相同數量的 ★（= input 個）**，不會依照 `i` 的變化而改變

#### 結果會是：

```
☆☆☆☆☆★★★★★
☆☆☆☆★★★★★
☆☆☆★★★★★
☆☆★★★★★
☆★★★★★
```

---

### 3.2 星星數量調整

寫到這發現星星數量與題目有異（白星星多一顆），所以將 `j <= input` 調整為 `j < input`。

```js
for(let j = i; j < input ; j++ ) {
    document.write('☆');
}
```

```
☆☆☆☆★
☆☆☆★★
☆☆★★★
☆★★★★
★★★★★
```

### 4. 印出右半邊

寫到這已經完成一半了！  
將剩下的星星想辦法打印出來就可以囉～

```js
const input = prompt("輸入一個數字");
for(let i = 1; i <= input; i++ ) {
    for(let j = i; j < input ; j++ ) {
        document.write('☆');
    }
    for(let k = i; k >= 1 ; k-- ) {
        document.write('★');
    }
    for(let m = i; m > 1 ; m-- ) {
        document.write('★');
    }
    for(let l = i; l < input ; l++ ) {
        document.write('☆');
    }
    document.write('<br>');
}
```

最終調整的版本：

```
☆☆☆☆★☆☆☆☆
☆☆☆★★★☆☆☆
☆☆★★★★★☆☆
☆★★★★★★★☆
★★★★★★★★★
```

---

### 5. 變化版-印出菱形

這裡也可以用類似的邏輯完成。

```
☆☆☆☆★☆☆☆☆
☆☆☆★★★☆☆☆
☆☆★★★★★☆☆
☆★★★★★★★☆
★★★★★★★★★
☆★★★★★★★☆
☆☆★★★★★☆☆
☆☆☆★★★☆☆☆
☆☆☆☆★☆☆☆☆
```

---

## 反思

第一次寫解題筆記，步驟拆解得比較瑣碎，花了很多時間。  
但在講解的過程當中，將過往隨便就帶過的地方再重新理解了一遍。  
對於理解題目有很大幫助。

在解巢狀迴圈時，一開始不知道內層與外層的數字流向是什麼，用表格慢慢帶入就比較清楚他們在做什麼。

| i 值    | i <= Input (3)  | i++            |
|---------|-----------------|----------------|
| i = 1   | 1 <= 3  √       | 1 + 1 = 2      |
| i = 2   | 2 <= 3  √       | 2 + 1 = 3      |
| i = 3   | 3 <= 3  √       | 3 + 1 = 4      |
| i = 4   | 4 <= 3  X       | X              |

| j 值    | j <= Input (3)  | j++            |
|---------|-----------------|----------------|
| j = 1   | 1 <= 3  √       | 1 + 1 = 2      |
| j = 2   | 2 <= 3  √       | 2 + 1 = 3      |
| j = 3   | 3 <= 3  √       | 3 + 1 = 4      |
| j = 4   | 4 <= 3  X       | X              |

| k 值    | k >= 1          | k--            |
|---------|-----------------|----------------|
| k = 3   | 3 >= 1  √       | 3 - 1 = 2      |
| k = 2   | 2 >= 1  √       | 2 - 1 = 1      |
| k = 1   | 1 >= 1  √       | 1 - 1 = 0      |
| k = 0   | 0 >= 1  X       | X              |
