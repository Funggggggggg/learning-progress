# 該年幾天 解題
## 題目
>使用者可以輸入西元年、月、日，三個 prompt()
>顯示使用者輸入的是該年的第幾天
>
>以 3/5 為例，將前兩個月的天數加起來，再加上 5 天即可
>需考慮閏年 +1
>某些月份的天數是 30，某些月份的天數是 31
>parseInt(變數或是數字的文字) 可以把文字轉數字

---
## 困難點
### 1. 閨年的判斷邏輯及語法錯誤
原本寫法：
```js
❌ if ( month == 2 ) && (year %= 100 ) && (year %= 400 ) {
    total + 29
    }
```
- 語法錯誤：
```
1. `else if` 的條件判斷需要用`()`包裹。
2. `total + 29` 無效，應該是 `total += 29`
```
- 運算子錯誤： `year %= 100` 的意思是：**「把 year 對 100 取餘數，並賦值回 year」**。但我在這裡的意思是：「year 可以被 100 整除」。
所以要用比較運算子 `==` 或 `===` => ` year % 100 == 0`
- 閏年邏輯錯誤：原本以為「 year 可以被 100 及 400 整除」就是閨年，但後來發現，邏輯應該是：**「year 可被 4 整除但不可被 100 整除，或可被 400 整除」**

正確寫法應該是：
```js
✅ if (month === 2 && ((year % 4 === 0 && year % 100 !== 0) || year % 400 === 0)) {
    total += 29;
    }
```
---
### 2. 迴圈內月份的判斷語法
這個錯誤寫法一開始沒有抓到，後來試了幾次發現計算結果不對才找到。

```js
❌ if ( i === 1 || 3 || 5 || 7 || 8 || 10 || 12) {
        count += 31
    }
```

#### 第一種錯誤：
看起來像是：「只要 i 等於那些數字，就執行」。
但 JavaScript 在解析這段 `if` 條件時，會根據「**布林邏輯運算**」變成：

```js
if ((i === 1) || 3 || 5 || 7 || 8 || 10 || 12)
```

- `i === 1` → 會回傳 `true` 或 `false`
- 然後進入 `||` 的布林運算鏈：
   - `true || 3` → 第一個是 true，整體就是 true
   - `false || 3` → `3` 是 truthy（非 0 數字都算是 true），整體還是 true
- 後面的 `|| 5 || 7 ...` 完全不會用到，因為前面就已經是 true 了

---
意思就是：

```js
if (i === 1 || 3 || 5)
```
就等於：
```js
if (true || true || true) // 永遠成立
```

---

> 複習：布林值 `true`？
> 在 JavaScript 中，**所有非 0、非空字串、非 null/undefined** 的值都是「truthy」，也就是布林值為 `true`。
>
>```js
> if (3) // ✅ 成立
> if ('hello') // ✅ 成立
> if (0) // ❌ 不成立
> if ('') // ❌ 不成立
>```

---

後來又修改成另一個版本依然錯誤：

```js
❌ if (i === (1 || 3 || 5 || 7 || 8 || 10 || 12))
```

#### 第二種錯誤：
看起來很像是在問「i 等不等於這幾個數字」，但其實不是！
這樣的寫法其實只等於：
```js
if (i === 1)
```

因為在 JavaScript 中，這段 `(1 || 3 || 5 || ...)` 是一個 **邏輯運算式（OR）**，它會回傳「**第一個 truthy 值**」：
- `1` 是 truthy，所以整體結果是：`(1 || 3 || ...)` ➜ `1`
- 所以實際變成：
  ```js
  if (i === 1)
  ```
---
所以正確的寫法應該是：

```js
✅ if ( (i === 1) || ( i === 3) || (i === 5) || (i === 7) || (i === 8) 
      || (i === 10) || (i === 12) ) {
            count += 31
    }
```
或是
```js
✅ if ([1, 3, 5, 7, 8, 10, 12].includes(i))
```
---

## 解答
附上思考邏輯及一些零星的語法錯誤說明。
```js
<script>
        const year = parseInt(prompt("請輸入西元年"))
        const month = parseInt(prompt("請輸入月份"))
        const date = parseInt(prompt("請輸入日期"))

        let count = 0
        
        // (該月 - 1) 累加前面的天數，同時判斷當年的 2 月份有幾天
        // year 可被 4 整除 但不可被 100 整除，或可被 400 整除
        // 再加上該月的天數
        
        for (let i = 1; i < month ; i++) {
                if ( (i === 1) || ( i === 3) || (i === 5) || (i === 7) || (i === 8) || (i === 10) || (i === 12) ) {
                    count += 31
                } else if (( i === 2 ) && ((year % 4 === 0) && ( year % 100 !== 0 )) && (year % 400 === 0 )) {
                    count += 29
                } else if ( i === 2 ) {
                    count += 28
                } else if ((i === 4) || (i === 6) || (i === 9) || (i === 11) ) {
                    count += 30 
                }
            }
        // 1.❌ 邏輯錯誤 count = count + date
        // 2.❌ 順序錯誤 迴圈後再加上日期，不能放在迴圈前
        let total = count + date
        console.log(total)
        document.write(`今天是 ${year} 年的第 ${total} 天`)

    </script>
```
---
## 心得
果然要寫題目才知道自己的語法跟觀念哪裡有紕漏。
再請 ChatGPT 出個 「反推第幾天是幾月幾號」的作業，練習「月份天數」與「迴圈累加邏輯」。